{% extends "base.html" %}

{% block title %}Settings - Admin - {{ ctf_name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-3">
        <div class="admin-sidebar p-3">
            <h5 class="mb-3">Admin Menu</h5>
            <nav class="nav flex-column">
                <a href="{{ url_for('admin.dashboard') }}" class="admin-nav-link">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
                <a href="{{ url_for('admin.manage_challenges') }}" class="admin-nav-link">
                    <i class="bi bi-puzzle"></i> Challenges
                </a>
                <a href="{{ url_for('admin.manage_users') }}" class="admin-nav-link">
                    <i class="bi bi-people"></i> Users
                </a>
                <a href="{{ url_for('admin.manage_teams') }}" class="admin-nav-link">
                    <i class="bi bi-people-fill"></i> Teams
                </a>
                <a href="{{ url_for('admin.ctf_control') }}" class="admin-nav-link">
                    <i class="bi bi-clock-history"></i> CTF Control
                </a>
                <a href="{{ url_for('admin.settings') }}" class="admin-nav-link active">
                    <i class="bi bi-gear"></i> Settings
                </a>
            </nav>
        </div>
    </div>
    
    <div class="col-md-9">
        <h2 class="mb-4">
            <i class="bi bi-gear"></i> Settings
        </h2>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Platform Information</h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="ctf_name" class="form-label">CTF Name</label>
                        <input type="text" class="form-control" id="ctf_name" name="ctf_name" 
                               value="{{ ctf_name }}" readonly>
                        <div class="form-text">Set via CTF_NAME environment variable</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="ctf_description" class="form-label">CTF Description</label>
                        <textarea class="form-control" id="ctf_description" name="ctf_description" 
                                  rows="3" readonly>{{ ctf_description }}</textarea>
                        <div class="form-text">Set via CTF_DESCRIPTION environment variable</div>
                    </div>
                    
                    <div class="alert alert-info mb-0">
                        <i class="bi bi-info-circle"></i>
                        <strong>Note:</strong> These settings are configured via environment variables in docker-compose.yml or .env file. 
                        Restart the application after making changes.
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Features</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="registration_enabled" 
                               {% if registration_enabled %}checked{% endif %} disabled>
                        <label class="form-check-label" for="registration_enabled">
                            Registration Enabled
                        </label>
                        <div class="form-text">Set via REGISTRATION_ENABLED environment variable</div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="redis_enabled" checked disabled>
                        <label class="form-check-label" for="redis_enabled">
                            Redis Caching
                        </label>
                        <div class="form-text">Configured in docker-compose.yml</div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="realtime_enabled" checked disabled>
                        <label class="form-check-label" for="realtime_enabled">
                            Real-time Updates (Socket.IO)
                        </label>
                        <div class="form-text">Enabled by default</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">System Information</h5>
            </div>
            <div class="card-body">
                <dl class="row mb-0">
                    <dt class="col-sm-4">Flask Version</dt>
                    <dd class="col-sm-8">{{ get_flask_version() }}</dd>
                    
                    <dt class="col-sm-4">Database</dt>
                    <dd class="col-sm-8">MySQL/MariaDB</dd>
                    
                    <dt class="col-sm-4">Cache</dt>
                    <dd class="col-sm-8">Redis</dd>
                    
                    <dt class="col-sm-4">Web Server</dt>
                    <dd class="col-sm-8">Gunicorn with Eventlet</dd>
                </dl>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Documentation</h5>
            </div>
            <div class="card-body">
                <h6>Available Documentation Files:</h6>
                <ul>
                    <li><code>README.md</code> - Main project documentation</li>
                    <li><code>DEPLOYMENT.md</code> - Deployment guide</li>
                    <li><code>SETUP_COMPLETE.md</code> - Initial setup information</li>
                    <li><code>FIXES_APPLIED.md</code> - Applied fixes and solutions</li>
                    <li><code>TROUBLESHOOTING.md</code> - Common issues and solutions</li>
                </ul>
                
                <h6 class="mt-4">Quick Tips:</h6>
                <ul>
                    <li>Use dynamic scoring for challenges to reward early solvers</li>
                    <li>Monitor the scoreboard for suspicious activity</li>
                    <li>Regularly backup your database</li>
                    <li>Check logs for errors: <code>docker-compose logs -f ctf</code></li>
                    <li>Use Redis for better performance with many users</li>
                </ul>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
// Helper function to get Flask version
function getFlaskVersion() {
    return '{{ flask_version }}';
}
</script>
{% endblock %}
{% endblock %}
